
    Dieser Anhang wurde am Ende des Projekts nachgereicht. Er enthält Belege für
    durchgeführte Maßnahmen, bzw. falls nicht durchgeführt eine Begründung wieso
    die Durchführung nicht möglich oder nicht erfolgt ist. \\


% ---------------------------------------------------------------------------
% statische Analysetools

\section{Statische Code-Analyse-Tools}

Um eine hohe Code-Qualität sicherzustellen und damit die Wartbarkeit der
Anwendung zu verbessern, wurden statische Analysetools eingesetzt.

\subsection{Checkstyle}

Wir haben das bekannte und beliebte Tool \glqq Checkstyle\grqq~ verwendet, um die Einhaltung von üblichen Richtlinien zum Programmierstil zu überprüfen und durchzusetzen. Diese tragen zu guter Lesbarkeit und geringer Komplexität des Quellcodes bei.

Im Folgenden befindet sich ein Report, der erstellt wurde, als begonnen haben, \glqq Checkstyle\grqq~ einzusetzen. Anschließend haben wir alle bereits vorhandenen Warnungen in Commit 5cd67e0aff2b1edd2b42c48fd6b0a36af83a243e \glqq fixes Checkstyle warnings\grqq~ abgearbeitet. Da mit dem Plugin \glqq Checkstyle-IDEA\grqq~ alle Warnungen direkt in unserer Entwicklungsumgebung angezeigt werden, konnten diese ab dann direkt bei der Programmierung behoben werden, sodass der zweite, zum Abschluss des Projektes erstellte, Report leer ist. Ein Screenshot des Plugins mit markierten Fehlern findet sich im Abschnitt nach den Berichten.

Wir haben bei der Checkstyle-Überprüfung auf die Überprüfung verzichtet, ob Felder als private deklariert werden können, da es bei Android eine empfohlene Vorgehensweise ist, einige Felder öffentlich zu deklarieren. Dies sorgt auf mobilen Geräten für mehr Effizienz, da zum Zugreifen auf ein solches Feld keine Methode über einen Call-Stack aufgerufen werden müssen.

\subsubsection{Checkstyle-Konfiguration}

Wir verwenden Checkstyle mit der folgenden Gradle-Konfiguration, um Testdateien nicht der Prüfung zu unterziehen:

\begin{lstlisting}
apply plugin: 'checkstyle'

task checkstyle(type: Checkstyle) {
    source 'src'
    include '**/*.java'
    exclude '**/gen/**','**/*Test.java'
    classpath = files()
}
\end{lstlisting}

Die explizite XML-Konfiguration für Checkstyle selbst sieht wie folgt aus:

\begin{lstlisting}
<?xml version="1.0" encoding="UTF-8" standalone="no"?>

<!DOCTYPE module PUBLIC
    "-//Puppy Crawl//DTD Check Configuration 1.2//EN"
    "http://www.puppycrawl.com/dtds/configuration_1_2.dtd">

<!--
Checkstyle Configuration
Severity: HARD
-->
<module name="Checker">

    <!-- Checks whether files end with a new line.                        -->
    <!-- See http://checkstyle.sourceforge.net/config_misc.html#NewlineAtEndOfFile -->
    <module name="NewlineAtEndOfFile" />

    <!-- Checks that property files contain the same keys.         -->
    <!-- See http://checkstyle.sourceforge.net/config_misc.html#Translation -->
    <module name="Translation" />

    <!-- Checks for Size Violations.                    -->
    <!-- See http://checkstyle.sourceforge.net/config_sizes.html -->
    <module name="FileLength" />

    <!-- Checks for whitespace                               -->
    <!-- See http://checkstyle.sourceforge.net/config_whitespace.html -->
    <module name="FileTabCharacter" />

    <!-- Miscellaneous other checks.                   -->
    <!-- See http://checkstyle.sourceforge.net/config_misc.html -->
    <module name="RegexpSingleline">
        <property name="format" value="\s+$" />
        <property name="minimum" value="0" />
        <property name="maximum" value="0" />
        <property name="message" value="Line has trailing spaces." />
        <property name="severity" value="info" />
    </module>

    <module name="TreeWalker">

        <!-- Checks for Javadoc comments.                     -->
        <!-- See http://checkstyle.sourceforge.net/config_javadoc.html -->
        <module name="JavadocMethod">
            <property name="scope" value="package" />
            <property name="allowMissingParamTags" value="true" />
            <property name="allowMissingThrowsTags" value="true" />
            <property name="allowMissingReturnTag" value="true" />
            <property name="allowThrowsTagsForSubclasses" value="true" />
            <property name="allowUndeclaredRTE" value="true" />
            <property name="allowMissingPropertyJavadoc" value="true" />
            <property name="severity" value="ignore" />
        </module>
        <module name="JavadocType">
            <property name="scope" value="package" />
            <property name="severity" value="ignore" />
        </module>
        <module name="JavadocVariable">
            <property name="scope" value="package" />
            <property name="severity" value="ignore" />
        </module>
        <module name="JavadocStyle">
            <property name="checkEmptyJavadoc" value="true" />
            <property name="severity" value="ignore" />
        </module>

        <!-- Checks for Naming Conventions.                  -->
        <!-- See http://checkstyle.sourceforge.net/config_naming.html -->
        <!-- skip ConstantNameCheck, as it is common practice to have mutable static variables in Android -->
        <!-- <module name="ConstantName" /> -->
        <module name="LocalFinalVariableName" />
        <module name="LocalVariableName" />
        <module name="MemberName" />
        <module name="MethodName" />
        <module name="PackageName" />
        <module name="ParameterName" />
        <module name="StaticVariableName" />
        <module name="TypeName" />

        <!-- Checks for imports                              -->
        <!-- See http://checkstyle.sourceforge.net/config_import.html -->
        <module name="AvoidStarImport" />
        <module name="IllegalImport" />
        <!-- defaults to sun.* packages -->
        <module name="RedundantImport" />
        <module name="UnusedImports" />


        <!-- Checks for Size Violations.                    -->
        <!-- See http://checkstyle.sourceforge.net/config_sizes.html -->
        <module name="LineLength">
            <!-- what is a good max value? -->
            <property name="max" value="150" />
            <!-- ignore lines like "$File: //depot/... $" -->
            <property name="ignorePattern" value="\$File.*\$" />
            <property name="severity" value="info" />
        </module>
        <module name="MethodLength" />


        <!-- Checks for whitespace                               -->
        <!-- See http://checkstyle.sourceforge.net/config_whitespace.html -->
        <module name="EmptyForIteratorPad" />
        <module name="GenericWhitespace" />
        <module name="MethodParamPad" />
        <module name="NoWhitespaceAfter" />
        <module name="NoWhitespaceBefore" />
        <module name="OperatorWrap" />
        <module name="ParenPad" />
        <module name="TypecastParenPad" />
        <module name="WhitespaceAfter" />
        <module name="WhitespaceAround" />

        <!-- Modifier Checks                                    -->
        <!-- See http://checkstyle.sourceforge.net/config_modifiers.html -->
        <module name="ModifierOrder" />
        <module name="RedundantModifier" />


        <!-- Checks for blocks. You know, those {}'s         -->
        <!-- See http://checkstyle.sourceforge.net/config_blocks.html -->
        <module name="AvoidNestedBlocks" />
        <module name="EmptyBlock">
            <property name="option" value="text" />
        </module>
        <module name="LeftCurly" />
        <module name="NeedBraces" />
        <module name="RightCurly" />


        <!-- Checks for common coding problems               -->
        <!-- See http://checkstyle.sourceforge.net/config_coding.html -->
        <module name="EmptyStatement" />
        <module name="EqualsHashCode" />
        <module name="HiddenField">
            <property name="ignoreConstructorParameter" value="true" />
            <property name="ignoreSetter" value="true" />
            <property name="severity" value="warning" />
        </module>
        <module name="IllegalInstantiation" />
        <module name="InnerAssignment" />
        <module name="MagicNumber">
            <property name="severity" value="info" />
            <property name="ignoreNumbers" value="-1, 0, 1, 2, 3, 4, 5, 8, 10, 12, 16, 24, 30, 32, 60, 64, 100, 120, 128, 180, 256, 360, 1000" />
        </module>
        <module name="MissingSwitchDefault">
            <property name="severity" value="ignore" />
        </module>
        <!-- Problem with finding exception types... -->
        <module name="SimplifyBooleanExpression" />
        <module name="SimplifyBooleanReturn" />

        <!-- Checks for class design                         -->
        <!-- See http://checkstyle.sourceforge.net/config_design.html -->
        <module name="FinalClass" />
        <module name="HideUtilityClassConstructor" />
        <module name="InterfaceIsType" />
        <!-- no visibility modifier checks, as it is common practice in Android to have certain
             publicly accesible fields for performace reasons -->
        <!-- <module name="VisibilityModifier" /> -->


        <!-- Miscellaneous other checks.                   -->
        <!-- See http://checkstyle.sourceforge.net/config_misc.html -->
        <module name="ArrayTypeStyle" />
        <module name="UpperEll" />

    </module>

    <!-- Enable suppression comments -->
    <module name="SuppressionCommentFilter">
        <property name="offCommentFormat" value="CHECKSTYLE IGNORE\s+(\S+)" />
        <property name="onCommentFormat" value="CHECKSTYLE END IGNORE\s+(\S+)" />
        <property name="checkFormat" value="$1" />
    </module>
    <module name="SuppressWithNearbyCommentFilter">
        <property name="commentFormat" value="SUPPRESS CHECKSTYLE (\w+)" />
        <property name="checkFormat" value="$1" />
        <property name="influenceFormat" value="1" />
    </module>

</module>
\end{lstlisting}


\includepdf[pages=1,offset=-0.8cm 0,scale=.8,pagecommand=\subsubsection{Initialer Checkstyle-Report}]{anhang/partials/checkstyle-1.pdf}
\includepdf[pages=2-,offset=-0.8cm 0,scale=.8,pagecommand={}]{anhang/partials/checkstyle-1.pdf}

\includepdf[pages=1,offset=-0.8cm 0,scale=.8,pagecommand=\subsubsection{Finaler Checkstyle-Report}]{anhang/partials/checkstyle-2.pdf}
\includepdf[pages=2-,offset=-0.8cm 0,scale=.8,pagecommand={}]{anhang/partials/checkstyle-2.pdf}

\subsubsection{Screenshot von Checkstyle-IDEA}

In diesem Screenshot ist sichtbar, wie Checkstyle direkt und insbesondere vor einem Commit Fehler markiert. Hier wird angemerkt, dass zwischen der Typumwandlung \glqq (Peer)\grqq~ und dem Feld \glqq other\grqq~ ein Leerzeichen fehlt, sowie dass die if-else-Konstruktion keine geschweiften Klammern verwendet.

Durch die auffällige rote Markierung kann die Checkstyle-Warnung nicht übersehen werden.

\includegraphics[width=17.5cm]{belege/checkstyle/checkstyle-idea-screenshot.png}


\clearpage
\subsection{Android Lint}

Zusätzlich zu Checkstyle haben wir das von Google entwickelte und empfohlene \glqq Android Lint\grqq~ genutzt. Dieses Tool ist speziell für Android optimiert und erzeugt im Gegensatz zu Checkstyle weniger Warnungen bezüglich syntaktischer Programmierrichtlinien, sondern vielmehr Empfehlungen zur Verbesserung der Performance, Usability, Accessibility und Korrektheit.

Dadurch verbessert sich einerseits die Wartbarkeit, denn durch das Befolgen der im Android-Umfeld üblichen Konventionen und die Verwendung von allgemein bekannten und anerkannten Entwurfsmustern, ist der Code zukünftigen Entwicklern leichter verständlich.

Im folgenden Abschnitt befindet sich wieder ein Report, der erstellt wurde, als wir begonnen haben, \glqq Android Lint\grqq~ einzusetzen. Dann wurden initial alle Warnungen und Empfehlungen abgearbeitet (Commit 1f4733747f7a98d89e7832937d94a9ddcbdc2bd5 \glqq fixes Android Lint errors and warnings\grqq). Die Warnungen und Empfehlungen werden direkt in der von uns verwendeten Entwicklungsumgebung Android Studio angezeigt, sodass diese anschließend während der Programmierung direkt umgesetzt werden konnten. Daher ist der zweite Report, der zum Abschluss des Projekts erstellt wurde, leer.

Nach den Berichten findet sich ein Screenshot, der markierte Android Lint-Warnungen anzeigt.


\includepdf[pages=1,offset=-0.8cm 0,scale=.8,pagecommand=\subsubsection{Initialer Android Lint Report}]{anhang/partials/lint-results-1.pdf}
\includepdf[pages=2-,offset=-0.8cm 0,scale=.8,pagecommand={}]{anhang/partials/lint-results-1.pdf}

\includepdf[pages=1,offset=-0.8cm 0,scale=.8,pagecommand=\subsubsection{Finaler Android Lint Report}]{anhang/partials/lint-results-2.pdf}

\subsubsection{Screenshot von Android Lint in Android Studio}

In diesem Screenshot ist ersichtlich, wie Android Lint anmerkt, statt \glqq paddingRight\grqq~ \glqq paddingEnd\grqq~ zu verwenden. Dies ist ein Beispiel für Verbesserungen der Accessibility für Android Apps. Weiterhin angemerkt wird, dass die beiden Konstruktionen aus jeweils einem \glqq LinearLayout\grqq~ und einem \glqq ImageView\grqq~ zu einem \glqq Compound Layout\grqq~ zusammengefasst werden können.

Durch die gelbe Hinterlegung in Android Studio, welche bereits beim Tippen des Quellcodes angezeigt wird, können Android Lint Warnungen kaum übersehen werden.

\includegraphics[width=17.5cm]{belege/lint/android-lint-screenshot.png}


\clearpage
\subsection{FindBugs}

Um häufig auftretende Fehler zu vermeiden, haben wir \glqq FindBugs\grqq~ eingesetzt. Im Folgenden befindet sich ein Report, der erstellt wurde, als wir mit der Verwendung von FindBugs begonnen aben. Anschließend wurden alle Fehler und Warnungen in Commit e30930731deb28b4af37f4d820a163f48dcf3ff4 \glqq fixes FindBugs errors\grqq~ behoben. Da wir das Plugin FindBugs-IDEA direkt in unsere Entwicklungsumgebung integriert haben und Fehler so direkt markiert wurden, konnten Fehler ab dann direkt bei der Entwicklung vermieden werden. Bei Projektende sind keine FindBugs-Warnungen vorhanden, es kann aber kein leerer Bericht exportiert werden, da das in FindBugs-IDEA nicht vorgesehen ist.

Nach den Berichten findet sich auch für FindBugs ein Screenshot, welcher \glqq FindBugs-IDEA\grqq~ in Aktion und insbesondere die nahtlose Integration in Android Studio zeigt.

\subsubsection{FindBugs-Konfiguration}

Wir verwenden FindBugs mit folgender Gradle-Konfiguration:

\begin{lstlisting}
apply plugin: 'findbugs'

findbugs {
    excludeFilter = file("$rootProject.projectDir/config/findbugs/excludeFilter.xml")
}
\end{lstlisting}

Unsere exclude-Konfiguration sieht wie folgt aus:

\begin{lstlisting}
<?xml version="1.0" encoding="UTF-8"?>
<FindBugsFilter>
    <Match>
        <!-- ignore all issues in resource generation -->
        <Class name="~.*\.R\$.*"/>
    </Match>
    <Match>
        <Class name="~.*\.Manifest\$.*"/>
    </Match>
</FindBugsFilter>
\end{lstlisting}

\includepdf[pages=1,offset=-0.8cm 0,scale=.8,pagecommand=\subsubsection{Initialer FindBugs-Report}]{anhang/partials/findbugs-1.pdf}
\includepdf[pages=2-,offset=-0.8cm 0,scale=.8,pagecommand={}]{anhang/partials/findbugs-1.pdf}

\subsubsection{Finaler FindBugs-Report}

Es sind keine FindBugs-Fehler vorhanden, davon kann allerdings kein Bericht erstellt werden. Daher folgt hier ein Screenshot von Android Studio als Beleg.

\includegraphics[width=17.5cm]{belege/findbugs/findbugs-no-warnings-screenshot.png}

\subsubsection{Screenshot von FindBugs-IDEA}

Im gezeigten Screenshot ist sichtbar, dass FindBugs eine Stelle im Code markiert hat, an der möglicherweise eine NullPointerException auftreten könnte. Weitere gefundene Fehler sind in der FindBugs-Ansicht unten am Bildschirm erkennbar.

Da betroffene Stellen orange unterstrichen werden und mit einer Fehlermarkierung am Rand angezeigt werden, sind sie direkt bei der Entwicklung der Anwendung ersichtlich und können umgehend behoben werden.

\includegraphics[width=17.5cm]{belege/findbugs/findbugs-idea-screenshot.png}


\clearpage

% ---------------------------------------------------------------------------
% Code Reviews (Einleitung)

\section{Code Reviews}

Zur Sicherstellung der Wartbarkeit durch hohe Code-Qualität wurde bei jedem
Sprint-Treffen mit dem Auftraggeber ein Code Review durchgeführt.

% ---------------------------------------------------------------------------
% Code Reviews: Checkliste

\subsection{Checkliste}

\input{spezifikation/code-review-checklist}

% ---------------------------------------------------------------------------
% Code Reviews: Ergebnisse
\input{anhang/partials/codereviews.tex}


\clearpage
\section{Dokumentation}

Um die Wartung der Anwendung in Zukunft zu erleichtern, wurden die technischen Grundlagen
sowie alle wichtigen Designentscheidungen in einem Dokument festgehalten.

\input{anhang/partials/dokumentation.tex}



% ---------------------------------------------------------------------------
% Automatisierte Tests: (Einleitung)

\clearpage
\section{Automatisierte Tests}

Es wurden JUnit-Tests für die automatisiert testbaren Codeteile durchgeführt.
Im Folgenden findet sich zunächst eine Liste aller Tests sowie der Testergebnisse,
außerdem das Ergebnis der Test-Coverage-Analyse, aufgeschlüsselt nach Packages.
\\\\
Wie bereits im QS-Dokument beschrieben, war ein Testen des UI- und Netzwerkcodes
(Packages bonfirechat.network und bonfirechat.ui)
mit dem JUnit-Framework nicht möglich, da die Android-Klassenbibliothek dort nicht
zur Verfügung steht. Das gleiche gilt für die Datenbankklasse, da diese von einer
Android-internen Klasse erbt. Daher konnte auch die Klasse bonfire.data.BonfireData
nicht mit automatisierten Tests versehen werden.
\\\\
Zusammenfassend gilt, dass wir automatisierte Tests für alle Methoden geschrieben haben,
die
\begin{itemize}
\item keine Klassen der Android-Klassenbibliothek verwenden,
\item Klassen der Android-Klassenbibliothek nur als Parameter übergeben bekommen,
sodass wir stattdessen mit Mockito erstellte Mock-Objekte übergeben können, oder
\item mit vertretbarem Aufwand angepasst werden konnten, sodass der vorhergehende Punkt zutrifft.
\end{itemize}

% ---------------------------------------------------------------------------
% Automatisierte Tests: Javadoc-Testplan

\includepdf[pages=1,scale=.8,pagecommand=\subsection{Testplan}]{anhang/partials/javadoc.pdf}
\includepdf[pages=2-,scale=.8,pagecommand={}]{anhang/partials/javadoc.pdf}

% ---------------------------------------------------------------------------
% Automatisierte Tests: Ergebnisse

\includepdf[pages=1,offset=-0.8cm 0,scale=.8,pagecommand=\subsection{Ergebnisse}]{anhang/partials/junit.pdf}
\includepdf[pages=2-,offset=-0.8cm 0,scale=.8,pagecommand={}]{anhang/partials/junit.pdf}


% ---------------------------------------------------------------------------
% Automatisierte Tests: Test Coverage

\subsection{Test Coverage}

Aufgrund der in der Einleitung zu \glqq Automatisierte Tests\grqq~ beschriebenen Probleme mit JUnit und Android können große Teile unseres Quellcodes nicht automatisiert getestet werden. Daher scheint auch die Testabdeckung relativ gering zu sein, es ist jedoch nicht möglich mehr Abdeckung zu erhalten.

\hspace{-1cm}
\includegraphics[width=19.3cm,clip=true,trim=0cm 15cm 0cm 0cm]{anhang/partials/coverage.pdf}

\clearpage

\section{Manuelle Tests der Benutzeroberfläche}

Da uns der Aufwand für die Nutzung eines Instrumented-Test-Frameworks
für das recht einfache User Interface der App unverhältnismäßig
erscheint, werden manuelle Tests anhand des folgenden Testplans
vorgenommen.

\subsection{Testplan}
\input{belege/manuelle-tests/ui/00-testplan.tex}

\input{anhang/partials/manuelle-tests-ui-reports.tex}


\clearpage
\section{Manueller Test für Routing und Datenübertragungs-Protokolle}

Ebenso wie bei den manuellen Tests der Benutzeroberfläche ist es kaum möglich, das Netzwerkverhalten der Anwendung automatisiert zu testen, da dafür physikalische Eigenschaften der Funkübertragung simuliert werden müssten. Wir haben daher manuelle Tests anhand des folgenden Testplans vorgenommen.

\subsection{Testplan}
\input{belege/manuelle-tests/netzwerk/00-testplan.tex}

\input{belege/manuelle-tests/netzwerk/netzwerktest-report-20150830.tex}


\clearpage
\section{Großtests}

Um das Verhalten der App bei einem tatsächlichen Einsatz mit vielen Benutzern und vielen Geräten zu simulieren, haben wir Großtests nach dem folgenden Testplan durchgeführt.

\input{belege/grosstests/testplan}
\clearpage

\input{belege/grosstests/grosstest-report-1.tex}
\clearpage

\input{belege/grosstests/grosstest-report-2.tex}
